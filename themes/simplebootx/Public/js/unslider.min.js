(function(e,t){if(!e)return t;var n=function(){this.el=t;this.items=t;this.sizes=[];this.max=[0,0];this.current=0;this.interval=t;this.opts={speed:500,delay:3e3,complete:t,keys:!t,dots:t,fluid:t};var n=this;this.init=function(t,n){this.el=t;this.ul=t.children("ul");this.max=[t.outerWidth(),t.outerHeight()];this.items=this.ul.children("li").each(this.calculate);this.opts=e.extend(this.opts,n);this.setup();return this};this.calculate=function(t){var r=e(this),i=r.outerWidth(),s=r.outerHeight();n.sizes[t]=[i,s];if(i>n.max[0])n.max[0]=i;if(s>n.max[1])n.max[1]=s};this.setup=function(){this.el.css({overflow:"hidden",width:n.max[0],height:this.items.first().outerHeight()});this.ul.css({width:this.items.length*100+"%",position:"relative"});this.items.css("width",100/this.items.length+"%");if(this.opts.delay!==t){this.start();this.el.hover(this.stop,this.start)}this.opts.keys&&e(document).keydown(this.keys);this.opts.dots&&this.dots();if(this.opts.fluid){var r=function(){n.el.css("width",Math.min(Math.round(n.el.outerWidth()/n.el.parent().outerWidth()*100),100)+"%")};r();e(window).resize(r)}if(this.opts.arrows){this.el.parent().append('<p class="arrows"><span class="prev">←</span><span class="next">→</span></p>').find(".arrows span").click(function(){e.isFunction(n[this.className])&&n[this.className]()})}if(e.event.swipe){this.el.on("swipeleft",n.prev).on("swiperight",n.next)}};this.move=function(t,r){if(!this.items.eq(t).length)t=0;if(t<0)t=this.items.length-1;var i=this.items.eq(t);var s={height:i.outerHeight()};var o=r?5:this.opts.speed;if(!this.ul.is(":animated")){n.el.find(".dot:eq("+t+")").addClass("active").siblings().removeClass("active");this.el.animate(s,o)&&this.ul.animate(e.extend({left:"-"+t+"00%"},s),o,function(i){n.current=t;e.isFunction(n.opts.complete)&&!r&&n.opts.complete(n.el)})}};this.start=function(){n.interval=setInterval(function(){n.move(n.current+1)},n.opts.delay)};this.stop=function(){n.interval=clearInterval(n.interval);return n};this.keys=function(t){var r=t.which;var i={37:n.prev,39:n.next,27:n.stop};if(e.isFunction(i[r])){i[r]()}};this.next=function(){return n.stop().move(n.current+1)};this.prev=function(){return n.stop().move(n.current-1)};this.dots=function(){var t='<ol class="dots">';e.each(this.items,function(e){t+='<li class="dot'+(e<1?" active":"")+'">'+(e+1)+"</li>"});t+="</ol>";this.el.addClass("has-dots").append(t).find(".dot").click(function(){n.move(e(this).index())})}};e.fn.unslider=function(t){var r=this.length;return this.each(function(i){var s=e(this);var u=(new n).init(s,t);s.data("unslider"+(r>1?"-"+(i+1):""),u)})}})(window.jQuery,false)


$.fn.slideBox = function(options) {
    //默认参数
    var defaults = {
        direction : 'left',//left,top
        duration : 0.6,//unit:seconds
        easing : 'swing',//swing,linear
        delay : 3,//unit:seconds
        startIndex : 0,
        hideClickBar : true,
        clickBarRadius : 5,//unit:px
        hideBottomBar : false,
        width : null,
        height : null
    };
    var settings = $.extend(defaults, options || {});
    //计算相关数据
    var wrapper = $(this), ul = wrapper.children('ul.items'), lis = ul.find('li'), firstPic = lis.first().find('img');
    var li_num = lis.size(), li_height = 0, li_width = 0;
    //定义滚动顺序:ASC/DESC.ADD.JENA.201208081718
    var order_by = 'ASC';
    //初始化
    var init = function(){
        if(!wrapper.size()) return false;
        //手动设定值优先.ADD.JENA.201303141309
        li_height = settings.height ? settings.height : lis.first().height();
        li_width = settings.width ? settings.width : lis.first().width();

        wrapper.css({width: li_width+'px', height:li_height+'px'});
        lis.css({width: li_width+'px', height:li_height+'px'});//ADD.JENA.201207051027

        if (settings.direction == 'left') {
            ul.css('width', li_num * li_width + 'px');
        } else {
            ul.css('height', li_num * li_height + 'px');
        }
        ul.find('li:eq('+settings.startIndex+')').addClass('active');

        if(!settings.hideBottomBar){//ADD.JENA.201208090859
            var tips = $('<div class="tips"></div>').css('opacity', 0.6).appendTo(wrapper);
            var title = $('<div class="title"></div>').html(function(){
                var active = ul.find('li.active').find('a'), text = active.attr('title'), href = active.attr('href');
                return $('<a>').attr('href', href).text(text);
            }).appendTo(tips);
            var nums = $('<div class="nums"></div>').hide().appendTo(tips);
            lis.each(function(i, n) {
                var a = $(n).find('a'), text = a.attr('title'), href = a.attr('href'), css = '';
                i == settings.startIndex && (css = 'active');
                $('<a>').attr('href', href).text(text).addClass(css).css('borderRadius', settings.clickBarRadius+'px').mouseover(function(){
                    $(this).addClass('active').siblings().removeClass('active');
                    ul.find('li:eq('+$(this).index()+')').addClass('active').siblings().removeClass('active');
                    start();
                    stop();
                }).appendTo(nums);
            });

            if(settings.hideClickBar){//ADD.JENA.201206300847
                tips.hover(function(){
                    nums.animate({top: '0px'}, 'fast');
                }, function(){
                    nums.animate({top: tips.height()+'px'}, 'fast');
                });
                nums.show().delay(2000).animate({top: tips.height()+'px'}, 'fast');
            }else{
                nums.show();
            }
        }

        lis.size()>1 && start();
    }
    //开始轮播
    var start = function() {
        var active = ul.find('li.active'), active_a = active.find('a');
        var index = active.index();
        if(settings.direction == 'left'){
            offset = index * li_width * -1;
            param = {'left':offset + 'px' };
        }else{
            offset = index * li_height * -1;
            param = {'top':offset + 'px' };
        }

        wrapper.find('.nums').find('a:eq('+index+')').addClass('active').siblings().removeClass('active');
        wrapper.find('.title').find('a').attr('href', active_a.attr('href')).text(active_a.attr('title'));

        ul.stop().animate(param, settings.duration*1000, settings.easing, function() {
            active.removeClass('active');
            if(order_by=='ASC'){
                if (active.next().size()){
                    active.next().addClass('active');
                }else{
                    order_by = 'DESC';
                    active.prev().addClass('active');
                }
            }else if(order_by=='DESC'){
                if (active.prev().size()){
                    active.prev().addClass('active');
                }else{
                    order_by = 'ASC';
                    active.next().addClass('active');
                }
            }
        });
        wrapper.data('timeid', window.setTimeout(start, settings.delay*1000));
    };
    //停止轮播
    var stop = function() {
        window.clearTimeout(wrapper.data('timeid'));
    };
    //鼠标经过事件
    wrapper.hover(function(){
        stop();
    }, function(){
        wrapper.data('timeid', window.setTimeout(start, settings.delay*1000));//ADD.JENA.201303141309
    });
    //首张图片加载完毕后执行初始化
    init();
};

$.fn.hoverDelay = function(options){
    var defaults = {
        hoverDuring: 200,
        outDuring: 200,
        hoverEvent: function(){
            $.noop();
        },
        outEvent: function(){
            $.noop();
        }
    };
    var sets = $.extend(defaults,options || {});
    var hoverTimer, outTimer;
    return $(this).each(function(){
        $(this).hover(function(){
            clearTimeout(outTimer);
            hoverTimer = setTimeout(sets.hoverEvent, sets.hoverDuring);
        },function(){
            clearTimeout(hoverTimer);
            outTimer = setTimeout(sets.outEvent, sets.outDuring);
        });
    });
}