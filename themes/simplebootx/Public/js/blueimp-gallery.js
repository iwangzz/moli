(function(a){typeof define=="function"&&define.amd?define(["./blueimp-helper"],a):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=a(window.blueimp.helper||window.jQuery))})(function(b){function a(d,c){if(!d||!d.length||document.body.style.maxHeight===undefined){return !1}if(!this||this.options!==a.prototype.options){return new a(d,c)}this.list=d;this.num=d.length;this.initOptions(c);this.initialize()}return b.extend(a.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5000,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:undefined,event:undefined,onopen:undefined,onopened:undefined,onslide:undefined,onslideend:undefined,onslidecomplete:undefined,onclose:undefined,onclosed:undefined},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},support:function(h){var l={touch:window.ontouchstart!==undefined||window.DocumentTouch&&document instanceof DocumentTouch},k={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}},d,j,c,g=function(){document.body.appendChild(h);
j&&(d=j.name.slice(0,-9)+"ransform",h.style[d]!==undefined&&(h.style[d]="translateZ(0)",c=window.getComputedStyle(h).getPropertyValue(j.prefix+"transform"),l.transform={prefix:j.prefix,name:d,translate:!0,translateZ:!!c&&c!=="none"}));h.style.backgroundSize!==undefined&&(h.style.backgroundSize="contain",l.backgroundSize={contain:window.getComputedStyle(h).getPropertyValue("background-size")==="contain"});document.body.removeChild(h)};for(d in k){if(k.hasOwnProperty(d)&&h.style[d]!==undefined){j=k[d];j.name=d;l.transition=j;break}}if(document.body){g()}else{b(document).on("DOMContentLoaded",g)}return l}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,initialize:function(){if(this.initStartIndex(),this.initWidget()===!1){return !1
}this.initEventListeners();this.onslide(this.index);this.ontransitionend();this.options.startSlideshow&&this.play()},slide:function(e,h){window.clearTimeout(this.timeout);var j=this.index,g,c,d;if(j!==e&&this.num!==1){if(h||(h=this.options.transitionSpeed),this.support.transition){for(this.options.continuous||(e=this.circle(e)),g=Math.abs(j-e)/(j-e),this.options.continuous&&(c=g,g=-this.positions[this.circle(e)]/this.slideWidth,g!==c&&(e=-g*this.num+e)),d=Math.abs(j-e)-1;d;){d-=1,this.move(this.circle((e>j?e:j)-d-1),this.slideWidth*g,0)}e=this.circle(e);this.move(j,this.slideWidth*g,h);this.move(e,0,h);this.options.continuous&&this.move(this.circle(e-g),-(this.slideWidth*g),0)}else{e=this.circle(e),this.animate(j*-this.slideWidth,e*-this.slideWidth,h)}this.onslide(e)}},getIndex:function(){return this.index
},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(d){var c=this;window.clearTimeout(this.timeout);this.interval=d||this.options.slideshowInterval;this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(f,e){c.animationFrameId=c.requestAnimationFrame.call(window,function(){c.slide(f,e)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval));this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout);this.interval=null;this.container.removeClass(this.options.playingClass)},add:function(d){var c;for(this.list=this.list.concat(d),this.num=this.list.length,this.num>2&&this.options.continuous===null&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),c=this.num-d.length;
c<this.num;c+=1){this.addSlide(c),this.positionSlide(c)}this.positions.length=this.num;this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty();this.slides=[]},handleClose:function(){var c=this.options;this.destroyEventListeners();this.pause();this.container[0].style.display="none";this.container.removeClass(c.displayClass).removeClass(c.singleClass).removeClass(c.leftEdgeClass).removeClass(c.rightEdgeClass);c.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle);this.options.clearSlides&&this.resetSlides();this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var d=this,c=function(e){e.target===d.container[0]&&(d.container.off(d.support.transition.end,c),d.handleClose())};if(this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition){this.container.on(this.support.transition.end,c);
this.container.removeClass(this.options.displayClass)}else{this.handleClose()}},circle:function(c){return(this.num+c%this.num)%this.num},move:function(d,c,e){this.translateX(d,c,e);this.positions[d]=c},translate:function(g,h,d,j){var l=this.slides[g].style,c=this.support.transition,k=this.support.transform;l[c.name+"Duration"]=j+"ms";l[k.name]="translate("+h+"px, "+d+"px)"+(k.translateZ?" translateZ(0)":"")},translateX:function(d,c,e){this.translate(d,c,0,e)},translateY:function(d,c,e){this.translate(d,0,c,e)},animate:function(e,h,g){if(!g){this.slidesContainer[0].style.left=h+"px";return}var j=this,d=(new Date).getTime(),c=window.setInterval(function(){var f=(new Date).getTime()-d;if(f>g){j.slidesContainer[0].style.left=h+"px";j.ontransitionend();window.clearInterval(c);return}j.slidesContainer[0].style.left=(h-e)*(Math.floor(f/g*100)/100)+e+"px"
},4)},preventDefault:function(c){c.preventDefault?c.preventDefault():c.returnValue=!1},onresize:function(){this.initSlides(!0)},onmousedown:function(c){if(c.which&&c.which===1&&c.target.nodeName!=="VIDEO"){(c.originalEvent||c).touches=[{pageX:c.pageX,pageY:c.pageY}];this.ontouchstart(c)}},onmousemove:function(c){if(this.touchStart){(c.originalEvent||c).touches=[{pageX:c.pageX,pageY:c.pageY}];this.ontouchmove(c)}},onmouseup:function(c){if(this.touchStart){this.ontouchend(c);delete this.touchStart}},onmouseout:function(c){if(this.touchStart){var d=c.target,e=c.relatedTarget;if(!e||e!==d&&!b.contains(d,e)){this.onmouseup(c)}}},ontouchstart:function(d){var c=(d.originalEvent||d).touches[0];this.touchStart={x:c.pageX,y:c.pageY,time:Date.now()};this.isScrolling=undefined;this.touchDelta={}},ontouchmove:function(e){var d=(e.originalEvent||e).touches[0],c=(e.originalEvent||e).scale,h=this.index,g,j;
if(!(d.length>1)&&(!c||c===1)){if(this.options.disableScroll&&e.preventDefault(),this.touchDelta={x:d.pageX-this.touchStart.x,y:d.pageY-this.touchStart.y},g=this.touchDelta.x,this.isScrolling===undefined&&(this.isScrolling=this.isScrolling||Math.abs(g)<Math.abs(this.touchDelta.y)),this.isScrolling){this.options.closeOnSwipeUpOrDown&&this.translateY(h,this.touchDelta.y+this.positions[h],0)}else{for(e.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?j=[this.circle(h+1),h,this.circle(h-1)]:(this.touchDelta.x=g=g/(!h&&g>0||h===this.num-1&&g<0?Math.abs(g)/this.slideWidth+1:1),j=[h],h&&j.push(h-1),h<this.num-1&&j.unshift(h+1));j.length;){h=j.pop(),this.translateX(h,g+this.positions[h],0)}}}},ontouchend:function(){var m=this.index,d=this.options.transitionSpeed,q=this.slideWidth,k=Number(Date.now()-this.touchStart.time)<250,g=k&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>q/2,u=!m&&this.touchDelta.x>0||m===this.num-1&&this.touchDelta.x<0,p=!g&&this.options.closeOnSwipeUpOrDown&&(k&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2),j,c,w,v,x;
if(this.options.continuous&&(u=!1),j=this.touchDelta.x<0?-1:1,this.isScrolling){p?this.close():this.translateY(m,0,d)}else{if(g&&!u){c=m+j;w=m-j;v=q*j;x=-q*j;this.options.continuous?(this.move(this.circle(c),v,0),this.move(this.circle(m-2*j),x,0)):c>=0&&c<this.num&&this.move(c,v,0);this.move(m,this.positions[m]+v,d);this.move(this.circle(w),this.positions[this.circle(w)]+v,d);m=this.circle(w);this.onslide(m)}else{this.options.continuous?(this.move(this.circle(m-1),-q,d),this.move(m,0,d),this.move(this.circle(m+1),q,d)):(m&&this.move(m-1,-q,d),this.move(m,0,d),m<this.num-1&&this.move(m+1,q,d))}}},ontransitionend:function(d){var c=this.slides[this.index];d&&c!==d.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,c]))},oncomplete:function(c){var d=c.target||c.srcElement,f=d&&d.parentNode,e;
d&&f&&(e=this.getNodeIndex(f),b(f).removeClass(this.options.slideLoadingClass),c.type==="error"?(b(f).addClass(this.options.slideErrorClass),this.elements[e]=3):this.elements[e]=2,d.clientHeight>this.container[0].clientHeight&&(d.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===f&&this.play(),this.setTimeout(this.options.onslidecomplete,[e,f]))},onload:function(c){this.oncomplete(c)},onerror:function(c){this.oncomplete(c)},onkeydown:function(c){switch(c.which||c.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(c),this.toggleControls());break;case 27:this.options.closeOnEscape&&this.close();break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(c),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(c),this.prev());
break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(c),this.next())}},handleClick:function(h){var g=this.options,d=h.target||h.srcElement,e=d.parentNode,c=function(f){return b(d).hasClass(f)||b(e).hasClass(f)};e===this.slidesContainer[0]?(this.preventDefault(h),g.closeOnSlideClick?this.close():this.toggleControls()):e.parentNode&&e.parentNode===this.slidesContainer[0]?(this.preventDefault(h),this.toggleControls()):c(g.toggleClass)?(this.preventDefault(h),this.toggleControls()):c(g.prevClass)?(this.preventDefault(h),this.prev()):c(g.nextClass)?(this.preventDefault(h),this.next()):c(g.closeClass)?(this.preventDefault(h),this.close()):c(g.playPauseClass)&&(this.preventDefault(h),this.toggleSlideshow())},onclick:function(c){if(this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)){delete this.touchDelta;
return}return this.handleClick(c)},updateEdgeClasses:function(c){c?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass);c===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(c){this.options.continuous||this.updateEdgeClasses(c);this.loadElements(c);this.options.unloadElements&&this.unloadElements(c);this.setTitle(c)},onslide:function(c){this.index=c;this.handleSlide(c);this.setTimeout(this.options.onslide,[c,this.slides[c]])},setTitle:function(d){var c=this.slides[d].firstChild.title,e=this.titleElement;e.length&&(this.titleElement.empty(),c&&e[0].appendChild(document.createTextNode(c)))},setTimeout:function(d,f,e){var c=this;return d&&window.setTimeout(function(){d.apply(c,f||[])
},e||0)},imageFactory:function(n,d){var l=this,m=this.imagePrototype.cloneNode(!1),j=n,p=this.options.stretchImages&&this.support.backgroundSize&&this.support.backgroundSize.contain,g,q,k=function(e){if(!g){if(e={type:e.type,target:q},!q.parentNode){return l.setTimeout(k,[e])}g=!0;b(m).off("load error",k);p&&e.type==="load"&&(q.style.background='url("'+j+'") center no-repeat',q.style.backgroundSize="contain");d(e)}},c;typeof j!="string"&&(j=this.getItemProperty(n,this.options.urlProperty),c=this.getItemProperty(n,this.options.titleProperty));p?q=this.elementPrototype.cloneNode(!1):(q=m,m.draggable=!1);c&&(q.title=c);b(m).on("load error",k);return m.src=j,q},createElement:function(h,g){var e=h&&this.getItemProperty(h,this.options.typeProperty),d=e&&this[e.split("/")[0]+"Factory"]||this.imageFactory,c=h&&d.call(this,h,g);
return c||(c=this.elementPrototype.cloneNode(!1),this.setTimeout(g,[{type:"error",target:c}])),b(c).addClass(this.options.slideContentClass),c},loadElement:function(c){this.elements[c]||(this.slides[c].firstChild?this.elements[c]=b(this.slides[c]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[c]=1,b(this.slides[c]).addClass(this.options.slideLoadingClass),this.slides[c].appendChild(this.createElement(this.list[c],this.proxyListener))))},loadElements:function(d){for(var c=Math.min(this.num,this.options.preloadRange*2+1),f=d,e=0;e<c;e+=1){f+=e*(e%2==0?-1:1),f=this.circle(f),this.loadElement(f)}},unloadElements:function(d){var f,e,c;for(f in this.elements){this.elements.hasOwnProperty(f)&&(c=Math.abs(d-f),c>this.options.preloadRange&&c+this.options.preloadRange<this.num&&(e=this.slides[f],e.removeChild(e.firstChild),delete this.elements[f]))
}},addSlide:function(d){var c=this.slidePrototype.cloneNode(!1);c.setAttribute("data-index",d);this.slidesContainer[0].appendChild(c);this.slides.push(c)},positionSlide:function(d){var c=this.slides[d];c.style.width=this.slideWidth+"px";this.support.transition&&(c.style.left=d*-this.slideWidth+"px",this.move(d,this.index>d?-this.slideWidth:this.index<d?this.slideWidth:0,0))},initSlides:function(c){var d,e;for(c||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),b(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,d=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",d&&this.resetSlides(),e=0;
e<this.num;e+=1){d&&this.addSlide(e),this.positionSlide(e)}this.options.continuous&&this.support.transition&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0));this.support.transition||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},toggleControls:function(){var c=this.options.controlsClass;this.container.hasClass(c)?this.container.removeClass(c):this.container.addClass(c)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(c){return parseInt(c.getAttribute("data-index"),10)},getNestedProperty:function(d,c){return c.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(m,l,g,k,h){var j=h||l||g||k&&parseInt(k,10);m&&d&&(d=d[j])}),d},getDataProperty:function(c,f){if(c.getAttribute){var d=c.getAttribute("data-"+f.replace(/([A-Z])/g,"-$1").toLowerCase());
if(typeof d=="string"){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(d)){try{return b.parseJSON(d)}catch(e){}}return d}}},getItemProperty:function(d,c){var e=d[c];return e===undefined&&(e=this.getDataProperty(d,c),e===undefined&&(e=this.getNestedProperty(d,c))),e},initStartIndex:function(){var d=this.options.index,c=this.options.urlProperty,e;if(d&&typeof d!="number"){for(e=0;e<this.num;e+=1){if(this.list[e]===d||this.getItemProperty(this.list[e],c)===this.getItemProperty(d,c)){d=e;break}}}this.index=this.circle(parseInt(d,10)||0)},initEventListeners:function(){var c=this,d=this.slidesContainer,e=function(g){var f=c.support.transition&&c.support.transition.end===g.type?"transitionend":g.type;c["on"+f](g)};b(window).on("resize",e);b(document.body).on("keydown",e);this.container.on("click",e);
if(this.support.touch){d.on("touchstart touchmove touchend",e)}else{if(this.options.emulateTouchEvents&&this.support.transition){d.on("mousedown mousemove mouseup mouseout",e)}}if(this.support.transition){d.on(this.support.transition.end,e)}this.proxyListener=e},destroyEventListeners:function(){var d=this.slidesContainer,c=this.proxyListener;b(window).off("resize",c);b(document.body).off("keydown",c);this.container.off("click",c);this.support.touch?d.off("touchstart touchmove touchend",c):this.options.emulateTouchEvents&&this.support.transition&&d.off("mousedown mousemove mouseup mouseout",c);this.support.transition&&d.off(this.support.transition.end,c)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var d=this,c=function(e){e.target===d.container[0]&&(d.container.off(d.support.transition.end,c),d.handleOpen())
};if((this.container=b(this.options.container),!this.container.length)||(this.slidesContainer=this.container.find(this.options.slidesContainer),!this.slidesContainer.length)){return !1}if(this.titleElement=this.container.find(this.options.titleElement),this.num===1&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition){this.container.on(this.support.transition.end,c)}else{this.handleOpen()}this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden");this.container[0].style.display="block";this.initSlides();this.container.addClass(this.options.displayClass)},initOptions:function(c){this.options=b.extend({},this.options);(c&&c.carousel||this.options.carousel&&(!c||c.carousel!==!1))&&b.extend(this.options,this.carouselOptions);
b.extend(this.options,c);this.num<3&&(this.options.continuous=this.options.continuous?null:!1);this.support.transition||(this.options.emulateTouchEvents=!1);this.options.event&&this.preventDefault(this.options.event)}}),a}),function(a){typeof define=="function"&&define.amd?define(["jquery","./blueimp-gallery.js"],a):a(window.jQuery,window.blueimp.Gallery)}(function(b,a){b(document).on("click","[data-gallery]",function(h){var c=b(this).data("gallery"),g=b(c),j=g.length&&g||b(a.prototype.options.container),d=b.extend(j.data(),{container:j[0],index:this,event:h,onopen:function(){j.data("gallery",this).trigger("open")},onopened:function(){j.trigger("opened")},onslide:function(){j.trigger("slide",arguments)},onslideend:function(){j.trigger("slideend",arguments)},onslidecomplete:function(){j.trigger("slidecomplete",arguments)
},onclose:function(){j.trigger("close")},onclosed:function(){j.trigger("closed").removeData("gallery")}}),k=b('[data-gallery="'+c+'"]');return d.filter&&(k=k.filter(d.filter)),new a(k,d)})}),function(a){typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],a):a(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(c,h){c.extend(h.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var g=h.prototype.initSlides,j=h.prototype.addSlide,d=h.prototype.resetSlides,k=h.prototype.handleClick,a=h.prototype.handleSlide,b=h.prototype.handleClose;return c.extend(h.prototype,{createIndicator:function(i){var l=this.indicatorPrototype.cloneNode(!1),m=this.getItemProperty(i,this.options.titleProperty),n=this.options.thumbnailProperty,f,e;
return this.options.thumbnailIndicators&&(e=i.getElementsByTagName&&c(i).find("img")[0],e?f=e.src:n&&(f=this.getItemProperty(i,n)),f&&(l.style.backgroundImage='url("'+f+'")')),m&&(l.title=m),l},addIndicator:function(f){if(this.indicatorContainer.length){var e=this.createIndicator(this.list[f]);e.setAttribute("data-index",f);this.indicatorContainer[0].appendChild(e);this.indicators.push(e)}},setActiveIndicator:function(e){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=c(this.indicators[e]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(e){e||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children));
g.call(this,e)},addSlide:function(e){j.call(this,e);this.addIndicator(e)},resetSlides:function(){d.call(this);this.indicatorContainer.empty();this.indicators=[]},handleClick:function(f){var e=f.target||f.srcElement,i=e.parentNode;if(i===this.indicatorContainer[0]){this.preventDefault(f),this.slide(this.getNodeIndex(e))}else{if(i.parentNode===this.indicatorContainer[0]){this.preventDefault(f),this.slide(this.getNodeIndex(i))}else{return k.call(this,f)}}},handleSlide:function(e){a.call(this,e);this.setActiveIndicator(e)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass);b.call(this)}}),h}),function(a){typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],a):a(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)
}(function(b,a){return b.extend(a.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"}),a.prototype.videoFactory=function(n,A,H){var j=this,D=this.options,q=this.elementPrototype.cloneNode(!1),J=b(q),F=[{type:"error",target:q}],C=H||document.createElement("video"),E=this.getItemProperty(n,D.urlProperty),G=this.getItemProperty(n,D.typeProperty),c=this.getItemProperty(n,D.titleProperty),m=this.getItemProperty(n,D.videoPosterProperty),x,d=this.getItemProperty(n,D.videoSourcesProperty),I,B,g,z;if(J.addClass(D.videoContentClass),c&&(q.title=c),C.canPlayType){if(E&&G&&C.canPlayType(G)){C.src=E}else{while(d&&d.length){if(I=d.shift(),E=this.getItemProperty(I,D.urlProperty),G=this.getItemProperty(I,D.typeProperty),E&&G&&C.canPlayType(G)){C.src=E;
break}}}}if(m&&(C.poster=m,x=this.imagePrototype.cloneNode(!1),b(x).addClass(D.toggleClass),x.src=m,x.draggable=!1,q.appendChild(x)),B=document.createElement("a"),B.setAttribute("target","_blank"),H||B.setAttribute("download",c),B.href=E,C.src){C.controls=!0;(H||b(C)).on("error",function(){j.setTimeout(A,F)}).on("pause",function(){g=!1;J.removeClass(j.options.videoLoadingClass).removeClass(j.options.videoPlayingClass);z&&j.container.addClass(j.options.controlsClass);j.interval&&j.play()}).on("playing",function(){g=!1;J.removeClass(j.options.videoLoadingClass).addClass(j.options.videoPlayingClass);j.container.hasClass(j.options.controlsClass)?(z=!0,j.container.removeClass(j.options.controlsClass)):z=!1}).on("play",function(){window.clearTimeout(j.timeout);g=!0;J.addClass(j.options.videoLoadingClass)
});b(B).on("click",function(e){j.preventDefault(e);g?C.pause():C.play()});q.appendChild(H&&H.element||C)}return q.appendChild(B),this.setTimeout(A,[{type:"load",target:q}]),q},a});